(function(){var scope=window,top,adScript='\u003Cscript\u0020type\u003D\u0022text\/javascript\u0022\u0020src\u003D\u0022https\u003A\/\/cdn.justpremium.com\/api\u002Dbuilder\u002Dprod\/hostingTags\/138253\/55114\/138253\u002DhostingTag.js\u0022\u003E\u003C\/script\u003E',iteration=300,time=+new Date(),version='https://cdn.justpremium.com/js/adpver.json?v='+time,jpxLib='https://cdn.justpremium.com/js/{VERSION}/',productCode='Wp',endpoint='https://ads.justpremium.com/extend/?',trackingEndpoint='https://tracking.justpremium.com/tracking.gif?',clickTrackerUrl='https://click.justpremium.com/tracking/1.0?{$trackingMacro}&redirect=',branch='',jpxExist=!1,st=0,trackerId='55114',cross=!1,jPAM,lineItemId=41506,social=!1,dfpUrl='https://cdn.justpremium.com/js/{VERSION}/jpx.dfp.Wp.js',isBusterLoaded=!1;try{top=window.top||getTop();doc=checkTopAccess()}catch(e){console.warn(e);top=window;cross=!0}function checkTopAccess(){return window.top.location.href||!1}function getTrackingData(ty){jPAM=top.jPAM||top.jPAM||{};var obj={rid:getRid(),sid:'',uid:'',vr:'',ru:getRefererUrl(),tt:time,siw:0,sh:scope.screen.height,sw:scope.screen.width,wh:scope.innerHeight,ww:scope.innerWidth,an:'',vn:'',sd:'',_c:Math.floor((Math.random()*Math.pow(2,32))+1).toString(),et:'',aid:'',said:'',ei:'',fc:'wp',sp:'',at:'extend',cid:'138253',ist:'',mg:'',dl:'',dlt:'',ev:'',vt:'',zid:138253,dr:(+new Date()-time),di:'',pr:'',cw:'',ch:'',nt:'',st:'',jp:JSON.stringify(getJpParams(ty)),ty:ty};if(ty==='ck'){obj.gdpr='${gdpr}';obj.gdpr_consent='${gdpr_consent_62}'}return obj}function getEndpointData(){var obj={zone:138253,ru:getRefererUrl(),sw:scope.screen.width,sh:scope.screen.height,ww:scope.innerWidth,wh:scope.innerHeight,tt:time,rid:getRid(),st:st,exwjs:1,ver:2,trackerId:trackerId?trackerId:0};if(lineItemId){obj.lineItemId=lineItemId}if(branch!==''){obj.branch=branch}if(jpxExist){obj.nwl=1}return obj}function logError(message,stack){console.warn(message);var errObj=getTrackingData('eerr');errObj.mg=message;if(stack){errObj.st=stack}pixelTracking(getTrackUrl(errObj))}function log(trackingCall,message){var trackingData=getTrackingData(trackingCall);if(message){trackingData.st=message}pixelTracking(getTrackUrl(trackingData))}function isBodyReady(){return scope&&scope.document&&scope.document.body&&scope.document.body.appendChild}function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1)}function getRid(t){t=t||+new Date();scope.jpxRid=scope.jpxRid||s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()+"-"+t;return scope.jpxRid}function getAdditionalTrackingData(plugins){plugins.forEach(function(plugin){if(managerAlreadyInitialized()&&jPAM.hasPlugin(plugin)&&typeof jPAM.getPlugin(plugin).getAdditionalTrackingData==="function"){return jPAM.getPlugin(plugin).getAdditionalTrackingData()}});return{"ias":null}}function getJpParams(ty){var jp={st:(st?'1':'0'),trackerId:trackerId?trackerId:0,ias:(ty.indexOf('im')!==-1?getAdditionalTrackingData(['extend','adserver','bidder']).ias:null)};return jp}function objectToUrlParams(obj){var str="";for(var key in obj){if(str!==""){str+="&"}str+=key+"="+encodeURIComponent(obj[key])}return str}function getTrackUrl(trackingObject){return trackingEndpoint+objectToUrlParams(trackingObject)}function getEndpointUrl(endpointObject){return endpoint+objectToUrlParams(endpointObject)}function pixelTracking(url){var ipx=scope.document.createElement("img");ipx.style.position="fixed";ipx.style.left="-9999px";ipx.style.top="-9999px";ipx.style.width="1px";ipx.style.height="1px";ipx.src=url;if(isBodyReady()){scope.document.body.appendChild(ipx)}else{scope.addEventListener('load',function(){scope.document.body.appendChild(ipx)})}}function getTop(){var top=window.parent||window.self;while(top.parent&&top!=top.parent){top=top.parent}return top}function getRefererUrl(){return top.document.location.protocol+"//"+top.document.location.host.replace(':8082','')+""+top.document.location.pathname+((typeof top.document.location.search!=="undefined")?top.document.location.search:"")}function xhrReq(url,callback){var req=new XMLHttpRequest();req.open('GET',url);req.onload=function(){if(req.status==200){if(callback)callback(JSON.parse(req.responseText))}else{var resp=JSON.parse(req.responseText);console.error(resp&&resp.message?resp.message:"Invalid response.");if(top.location.host==='creative-preview-an.com'){loadBackup()}}};req.onerror=function(e){console.error(e);logError(e)};req.send()}function managerAlreadyDefined(){return!!top.Jpx&&top.Jpx.JAM}function managerAlreadyInitialized(){return jPAM&&jPAM.initialized}function managerRequested(){return jPAM&&jPAM.requested}function loadScript(url,callback){var script=scope.document.createElement('script');script.src=url;script.onload=function(){callback&&callback()};script.onerror=function(e){console.error(e);logError(e)};scope.document.head.appendChild(script)}function createInstance(){var Jpx=scope.Jpx||top.Jpx;jPAM=top.jPAM=Jpx.JAM.instance({di:{window:scope},plugins:['extend']})}function loadAdManager(adpVer){if(managerAlreadyInitialized()){if(!jPAM.hasPlugin('extend')){jPAM.addPlugin('extend')}}if(managerAlreadyDefined()){return createInstance()}if(managerRequested()&&!managerAlreadyDefined()){if(iteration-->0){return setTimeout(loadAdManager,36)}return!1}jPAM.requested=!0;var productLib=jpxLib.replace('{VERSION}',adpVer)+'jpx.all.'+productCode+'.js';if(isOldBrowser()){var pollyfies=jpxLib.replace('{VERSION}',adpVer)+'jpxp.js';productLib=jpxLib.replace('{VERSION}',adpVer)+'jpx.'+productCode+'.js';loadScript(pollyfies,function(){loadScript(productLib,createInstance)})}else{loadScript(productLib,createInstance)}}function isOldBrowser(){var isPromisse=typeof Promise!=="undefined"&&Promise.toString().indexOf("[native code]")!==-1;var isWeakMap=typeof WeakMap!=="undefined"&&WeakMap.toString().indexOf("[native code]")!==-1;return(!Array.prototype.find||!Array.prototype.sort||!Array.prototype.map||!Array.prototype.filter||!Array.prototype.keys||!isPromisse||!isWeakMap)}function isInline(){if(top.jp_creative_vars){if(top.jp_creative_vars.inline||scope.jp_creative_vars.inline||window.jp_creative_vars.inline){console.log("Inline execution detected");return!0}return!1}}function isPreview(){if(top.jp_creative_vars){if(top.jp_creative_vars.preview||scope.jp_creative_vars.preview||window.jp_creative_vars.preview){console.log("Inline execution detected");return!0}return!1}}function setClickTrackerURL(){if(top.jp_creative_vars){clickTrackerUrl=clickTrackerUrl.replace('{$trackingMacro}',objectToUrlParams(getTrackingData('ck')));try{top.jp_creative_vars.clickmacro=scope.jp_creative_vars.clickmacro=window.jp_creative_vars.clickmacro=clickTrackerUrl+encodeURIComponent(top.jp_creative_vars.clickmacro)}catch(e){var errObj=getTrackingData('eerr');errObj.mg=404;errObj.st='ClickMacro variable does not exist';pixelTracking(getTrackUrl(errObj))}}}function loadJpx(){xhrReq(version,function(response){if(!response.version){console.error(encodeURIComponent('Getting adpr ver error'));logError("ADPRODUCT_VERSION_ERROR")}version=response.version||'';loadAdManager(version)})}function loadTag(json){jPAM=top.jPAM=top.jPAM||{};jPAM.cmd=jPAM.cmd||[];jPAM.cmd.push(function(){try{jPAM=top.jPAM=top.jPAM||{};var extend=jPAM.getPlugin('extend');if(json.ads&&json.ads.length&&json.ads[0].product){json.ads[0].product.width='1920';json.ads[0].product.height='1080'}var model=json.ads[0].models[0];model.creative={creatives:[{source:adScript}],trackerId:trackerId?trackerId:0};var sourceId=model.sourceId;extend.loadAd(json);extend.renderAd(sourceId,null)}catch(e){console.error(e.message);logError("EXTENT_PLUGIN_ERROR",e.message)}});jPAM.processCmd&&jPAM.processCmd()}function loadSettings(callback){var src=getEndpointUrl(getEndpointData());log("eadr");xhrReq(src,function(json){callback(json)})}function onReady(){log("eex");loadJpx();loadSettings(loadTag)}function isSocial(){return social}function createAdModel(){return{model:{"format":productCode.toLowerCase(),"creative":{"html":adScript},options:{"options":{"vast":{"closeenable":2,"autoclose":1,"buffering":2,"adtimeout":20,"autoclosetimeout":2,"initialvolume":20,"clickaction":0,"adcap":0}},"mobile":{"animations":{"show":0,"close":0}}}},product:{height:'1080',width:'1920'},global:{"device":{"type":"mobile"},"site":{"width":window.innerWidth/2}}}}function loadDfp(){xhrReq(version,function(response){if(!response.version){console.error(encodeURIComponent('Getting adpr ver error'));logError("ADPRODUCT_VERSION_ERROR")}var version=response.version||'';var url=dfpUrl.replace('{VERSION}',version);loadScript(url,function(){window.dfpJpx.execute(createAdModel(),'',productCode)})})}function loadAdTag(){try{onReady()}catch(e){logError("AD_TAG_EXECUTION_BLOCKED",e.message)}}function loadHostingTag(){log("htim");window.trackerId=trackerId?trackerId:0;window.document.write(adScript)}function loadBackup(){log("ebex");if(isSocial()){log("htim");loadDfp()}else{logError("SAFE_FRAME_EXECUTION_BLOCKED");log("eebi");try{var jpxObject=window.top.jpx_template_id?window.top[window.top.jpx_template_id]:!1}catch(e){jpxObject=!1}if(!jpxObject){var clickurl=cw.jp_creative_vars.clickmacro+cw.jp_creative_vars.landingpage;document.write('<a href="'+clickurl+'", target="_blank"><img src="https://cdn.justpremium.com/api-builder-prod/custom_builder/56882eed-36c6-43af-b34a-97eaa65b6335/1640017238/backup.jpg" width="1920" height="1080" /></a> ');var onlyBackup=setInterval(function(){var el=document.getElementsByClassName("jcl-wrapper")[0];if(el&&el.style.display!=="none"){el.style.display="none"}else{clearInterval(onlyBackup)}},100)}}}function isCross(){return cross}function apiAlreadyDefined(){return scope.jpxApi}function load(){try{if(isInline()){loadBackup()}else if(isPreview()){loadDfp()}else if(isCross()){loadSafeFrameBuster()}else if(!apiAlreadyDefined()){loadAdTag()}else{loadHostingTag()}}catch(e){console.warn("Error while runing adTag");loadBackup()}}function loadSafeFrameBuster(){if(scope.addEventListener){scope.addEventListener('message',onMessage,!1)}var script=scope.document.querySelector("script[src*='-adTag.js']");if(script&&script.src){const message={"type":"jp_ad","url":script.src,"trackingEndpoint":trackingEndpoint,"frameSrc":scope.location.href,"cid":'138253',"rid":getRid(),"fc":'wp',"zid":'138253',"creative":top.jp_creative_vars||scope.jp_creative_vars||window.jp_creative_vars};window.top.postMessage(JSON.stringify(message),'*');var i=1;var checkIfBusterLoaded=setInterval(function(){if(5===i){removeEvent();if(!isBusterLoaded){loadBackup()}clearInterval(checkIfBusterLoaded)}i++},100)}else{loadBackup()}}function onMessage(event){try{var eventOrigin=event.origin||event.originalEvent.origin;if(origin!==eventOrigin){var pattern=new RegExp('{"type":"jp_buster"}','i');if(!!pattern.test(event.data)){removeEvent();isBusterLoaded=!0}}}catch(e){console.warn(e.message);logError("SAFE_FRAME_ON_MESSAGE_ERROR")}}function removeEvent(){window.removeEventListener('message',onMessage,!1)}try{setClickTrackerURL();try{load()}catch(e){if(top.location.host==='creative-preview-an.com'){loadBackup()}}}catch(e){logError("AD_TAG_EXECUTION_BLOCKED",e.message)}})()